<!DOCTYPE html>
<html style="height:100%;">
    <head>
        <title>计算方差</title>

        <style>
            body{
                background: linear-gradient(
                    160deg, rgb(0,144,255), rgb(0,255,213));
                height:100%;
                margin:0;
            }

            .main{
                background: rgba(255, 255, 255, 0.5);
                padding:5%;
                margin:5%;
            }

            .button{
                font-size: 6vh;
                width: 20%;
                border: 0;
                margin: 0;
                padding: 0;
                border-radius: 4vh;
                box-shadow: black;
                background: linear-gradient(160deg, rgb(226, 29, 29), rgb(255, 208, 0));
                font-family: SimHei, 微软雅黑;
                outline: none;
                box-shadow: 0 0 2vh #999999;
                transition: box-shadow 0.5s;
            }
            
            .button:hover{
                box-shadow: 0 0 2vh blue;
            }

            #inputBar{
                font-size: 6vh;
                width: 35%;
                border: 0;
                margin: 0;
                padding: 0;
                border-radius: 4vh;
                padding-left: 1vh !important;
                box-shadow: black;
                font-family: SimHei, 微软雅黑; 
                outline: none;
                box-shadow: 0 0 2vh #aaaaaa;
                transition: box-shadow 0.5s;
            }

            #inputBar:hover{
                box-shadow: 0 0 2vh blue;
            }

            #inputBar:focus{
                box-shadow: 0 0 2vh green;
            }

            #arrayShowingBar{
                font-size: 6vh;
                font-family: SimHei, 微软雅黑;
                text-align: center;
            }

            #resultShowingBar{
                font-size: 6vh;
                font-family: SimHei, 微软雅黑;
                text-align: center;
            }
        </style>

        <script>
            var list = [];

            function UpdateArrayShowingBar(){
                // Convert the array into string
                var str = "当前列表: [";
                for(var i = 0; i < list.length; i++){
                    if(i != 0){
                        str += ", ";
                    }
                    str += list[i];
                }
                str += "]";

                // Show on the bar
                document.getElementById("arrayShowingBar").innerHTML = str;
            }

            function UpdateResultShowingBar(averange, variance){
                // Show on the bar
                document.getElementById("resultShowingBar").innerHTML =
                    "平均数: " + averange + "\n方差: " + variance;
            }

            function SubmitToArray(){
                // Get the value inside input bar
                var value = document.getElementById("inputBar").value;
                var num = Math.floor(value);
                list[list.length] = num;

                // Clear the input bar
                document.getElementById("inputBar").value = "";

                // Update showing bar
                UpdateArrayShowingBar();
            }

            function ClearArray(){
                // Clear the array
                list = [];

                // Update show bar
                UpdateArrayShowingBar();
            }

            function Claculate(){
                // Calculate Averange
                var total = 0;
                for(var i = 0; i < list.length; i++){
                    total += list[i];
                }
                var averange = total / list.length;

                // Calculate variance
                var totalError = 0;
                for(var i = 0; i < list.length; i++){
                    var tmp = list[i] - averange;
                    totalError += tmp * tmp;
                }
                var variance = totalError / list.length;

                UpdateArrayShowingBar();
                UpdateResultShowingBar(averange, variance);
            }

            window.onload = function(){
                UpdateArrayShowingBar();
            }
        </script>
    </head>
    <body>
        <div class="main">
            <div id="arrayShowingBar"></div>

            <input id="inputBar">
            <button class="button" onclick="ClearArray()"    >清空</button>
            <button class="button" onclick="SubmitToArray()" >提交</button>
            <button class="button" onclick="Claculate()"     >计算</button>

            <div id="resultShowingBar"></div>
        </div>
    </body>
</html>